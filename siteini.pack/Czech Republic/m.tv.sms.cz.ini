**------------------------------------------------------------------------------------------------
* @header_start
* WebGrab+Plus ini for grabbing EPG data from TvGuide websites
* @Site: m.tv.sms.cz
* @MinSWversion: V5.0
* @Revision 12 - [14/02/2025] Blackbear199
*	- episode fix
* @Revision 11 - [17/02/2023] Blackbear199
*	- showsplit fix
* @Revision 10 - [16/02/2023] Blackbear199
*	- showicon,channel logo fix
* @Revision 9 - [20/03/2022] Blackbear199
*	- ch xml fix,url change
* @Revision 8 - [24/01/2019] Blackbear199
*	- showsplit fix
* @Revision 7 - [17/08/2018] Blackbear199
*	- url_index fix
* @Revision 6 - [18/04/2018] Blackbear199
*	- attempt to fix...some channels(HORROR FILM) have no programming for today(05:00-06:00 - 24:00) but have some from 24:00 - 05:00-06:00
* @Remarks:
* @header_end
**------------------------------------------------------------------------------------------------
site {url=m.tv.sms.cz|timezone=Europe/Prague|maxdays=16|cultureinfo=cs-CZ|charset=windows-1250|titlematchfactor=90|allowlastdayoverflow}
site {ratingsystem=CZ|episodesystem=onscreen}
*
url_index                 {url|https://m.tv.sms.cz/mobilni/tvp/?stanice=|channel|&den=|urldate|&cas=}
url_index.headers         {customheader=Accept-Encoding=gzip,deflate,br}
*
urldate.format            {datestring|yyyy-MM-dd}
*
index_urlchannellogo      {url|https:|<div class='logo_out'|src='|'|</div>}
*
index_showsplit.scrub     {regex||<div class=\'porad\' .*?</div></a></div>||}
*index_showsplit.modify   {(debug)}
*
index_urlshow             {url||href='||'>|'>}
index_urlshow.headers     {customheader=Accept-Encoding=gzip,deflate,br}
*
index_start.scrub         {single(pattern="HH.mm")|<span style='|'>|</span>|</span>}
index_title.scrub         {regex||height: 18px;[^>]*>(.*?)<div||}
*
index_title.modify        {remove(type=regex)|"\s(?:[IVXLCDM]+\s\(\d+\/\d+\)\|[IVXLCDM]+\s\(\d+\)\|[IVXLCDM]+\|\(\d+\/\d+\)\|\(\d+\))$"}
index_temp_1.modify       {substring(type=regex)|'index_title' "\s(?:[IVXLCDM]+\s\(\d+\/\d+\)\|[IVXLCDM]+\s\(\d+\)\|[IVXLCDM]+\|\(\d+\/\d+\)\|\(\d+\))$"}

*
subtitle.scrub            {single|díl: </span>||<|<}
titleoriginal.scrub       {regex||<title>.*?\s/\s(.*?)(?:\s\(\d{4}\))?</title>||}
description.scrub         {multi|class="popis|<div class="nadpis_scroll">|<div>|<div class='program'>}
director.scrub            {multi(separator=",")|<strong>Režie:</strong>||</div>|</div>}
actor.scrub               {multi(separator=",")|<strong>Hrají:</strong>||</div>|</div>}
category.scrub            {multi(separator="/")|<strong>Žánr:</strong>||<br />|<br />}
productiondate.scrub      {single|<strong>Rok výroby:</strong>||<br />|<br />}
country.scrub             {single|Země:</strong>||<br />|<br />}
episode.scrub             {regex(pattern="'S1' ('E1'/'Et1')""'S1' ('E1')""'S1'""('E1'/'Et1')""('Et1'/'E1')""('E1')")||<span class="sedy_text">\s*\((\d+\. série / \d+. díl)\)</span>||}
starrating.scrub          {regex||<div class="detail_foto_in">(?:.*?)(?: center;">(\d+)\%)</div>||}
showicon.scrub            {single|<div class="detail_foto_in">|src="|"|</div>}
*
scope.range               {(showdetails)|end}
title.modify              {addstart|'index_title'}
description.modify        {substring(type=regex)|"^(?:.*?</div>(.*?</div>))"} * only get the info, not the description titles
description.modify        {cleanup(tags="<br<span""> />")}
description.modify        {cleanup(tags="<"">")}
description.modify        {cleanup}
description.modify        {remove('titleoriginal' not "")|('titleoriginal') }
titleoriginal.modify      {clear('title')}
titleoriginal.modify      {addend(not "")|(lang=en)}
director.modify           {remove| a další}
actor.modify              {remove| a další}
category.modify           {cleanup(style=name)}
country.modify            {cleanup(tags="<"">")}
country.modify            {replace|/ |/}
showicon.modify           {replace|/100/|/600/}
episode.modify            {set(['index_temp_1' not ""] ['episode' ""] &)|'index_temp_1'}
episode.modify            {replace|. série / | (}
episode.modify            {replace|. díl|)}
episode.modify            {cleanup(style=roman2arabicnumeral)}
if                        {('starrating' not "")|2}
starrating.modify         {calculate(format=F1)|10 /}
starrating.modify         {addend|/10}
showicon.modify           {addstart(not "")|https:}
end_scope
***  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _
***      #####  CHANNEL FILE CREATION (only to create the xxx-channel.xml file)
***
*** @auto_xml_channel_start
*url_index               {url|https://m.tv.sms.cz/?cas=&den=|urldate|&stanice=&detail=&tab=&id=&zmen_stanice=true&P_hledat=&hhistorie=&hstranka=}
*index_site_id.scrub     {regex||<div class=\'stanice\' title(?:.*?)(?:value=\'([^\']*)\'(?:.*?))*</div></div>||}
*index_site_channel.scrub{regex||<div class=\'stanice\' title(?:.*?)(?:class=\'nazev\'>([^<]*)</div>(?:.*?))*</div></div>||}
*index_site_id.modify    {cleanup(removeduplicates link="index_site_channel")}
*** @auto_xml_channel_end
