**------------------------------------------------------------------------------------------------
* @header_start
* WebGrab+Plus ini for grabbing EPG data from TvGuide websites
* @Site: tv.boxbg.net
* @MinSWversion: V5.0
* @Revision 3- [14/09/2025] Blackbear199
*   - update
* @Revision 2 - [23/02/2022] Blackbear199
*   - update
* @Revision 1 - [15/07/2020] Sprint_TV
* @Revision 0 - [30/01/2016] Jan van Straaten
*   - creation
* @Remarks:
* @header_end
**------------------------------------------------------------------------------------------------
site {url=tv.boxbg.net|timezone=Europe/Sofia|maxdays=7|cultureinfo=bg-BG|charset=UTF-8|titlematchfactor=90|nopageoverlaps}
site {episodesystem=onscreen|ratingsystem=Imdb}
*
scope.range {(urlindex)|end}
url_index {url|https://tv.boxbg.net/channel/##channel##?day=|urldate|}
url_index.headers {customheader=Accept-Encoding=gzip,deflate}
*
global_temp_1.modify {substring(type=regex)|'config_site_id' "^\d+"}
global_temp_2.modify {substring(type=regex)|'config_site_id' "^\d+--(.*)$"}
*
url_index.modify {replace|##channel##|'global_temp_2'/'global_temp_1'}
*
urldate.format {datestring|ddMMyyyy}
end_scope
*
index_urlchannellogo.modify {set(scope=datelogo)|https://tv.boxbg.net/img/logos/'global_temp_1'.jpg}
*
scope.range {(splitindex)|end}
index_showsplit.scrub {regex||<a href="#"\s*@click.*?</a>||}
index_showsplit.modify {cleanup(style=unidecode)}
index_showsplit.modify {cleanup(style=jsondecode)}
*index_showsplit.modify{(debug)}
end_scope
*
scope.range {(indexshowdetails)|end}
index_start.scrub {single|"start_at":"||"|"}
*index_stop.scrub {single|"end_at":"||"|"}
index_title.scrub {single|"bg_title":"||","|","}
index_description.scrub {single(separator=" - ""; " exclude=first)|"text":"||","|","}
index_category.scrub {single|"categories":"||",|",}
index_starrating.scrub {single|"imdb_rating":"||"|"}
index_country.scrub {single|"origin_country":"||",|",}
index_showicon.scrub {single|"poster":"||"|"}
index_temp_1.scrub {single(separator=" - ""; " include=first)|"text":"||","|","}
*
index_title.modify {set("")|'index_temp_1'}
index_description.modify {clear('index_title')}
index_description.modify {remove(type=regex)|"^\s*(?:-\s*)?,?\s*"}
index_starrating.modify {calculate(not "" format=F1)}
index_showicon.modify {addstart(not "")|https://tv.boxbg.net}
end_scope
**  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _
**      #####  CHANNEL FILE CREATION (only to create the xxx-channel.xml file)
**
** @auto_xml_channel_start
*url_index {url(scope=urlindex)|https://tv.boxbg.net/}
*scope.range {(channellist)|end}
*index_site_id.scrub {regex||id":(\d+,"name":"[^"]*)"||}
*index_site_channel.scrub {regex||id":\d+,"name":"([^"]*)"||}
*index_site_id.modify {replace|,"name":"|--}
*index_site_id.modify {cleanup(style=unidecode)}
*index_site_id.modify {cleanup(style=urlencode)}
*index_site_channel.modify {cleanup(style=unidecode)}
*index_site_id.modify {cleanup(removeduplicates link="index_site_channel")}
*end_scope
** @auto_xml_channel_end
